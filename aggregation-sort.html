<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-styles/color.html">
<link rel="import" href="../iron-icon/iron-icon.html">
<link rel="import" href="../iron-icons/av-icons.html">
<link rel="import" href="../iron-icons/iron-icons.html">

<!--
A Polymer Element showing sorting options as clickable icons.

### Example

    <aggregation-sort order-by="{{orderBy}}"></aggregation-sort>

### Styling

`<aggregation-sort>` provides the following custom properties and mixins for styling:

Custom property         | Description                 | Default
------------------------|-----------------------------|---------------------
`--default-icon-color`  | Color for sort icons        | --paper-grey-600
`--icon-hover-color`    | Icon color in hover         | --paper-blue-800
`--selected-icon-color` | Color of selected sort icon | --paper-blue-grey-800

@demo demo/index.html
-->

<dom-module id="aggregation-sort">
  <template>
    <style>
      :host {
        display: block;
      }
      iron-icon {
        color: var(--default-icon-color, --paper-grey-600);
        margin: 2px;
        --iron-icon-height: 18px;
        --iron-icon-width: 18px;
        vertical-align: middle;
        display: inline-block;
      }
      iron-icon:hover {
        cursor: pointer;
        color: var(--icon-hover-color, --paper-blue-800);
      }
      .selected {
        color: var(--selected-icon-color, --paper-blue-grey-800);
      }
    </style>

    <div>
      <span>Sort By:</span>
      <template is="dom-repeat" items="[[sortOptions]]" as="option">
        <iron-icon
          class$="{{_getIconClass(orderBy, option)}}"
          icon$="[[option.icon]]"
          on-tap="_updateSort"
          title="[[option.title]]">
        </iron-icon>
      </template>
    </div>
  </template>

  <script>
    Polymer({
      is: 'aggregation-sort',

      properties: {
        /**
         * Field on which to order aggregation.
         *
         * @type {String}
         * @default ''
         */
        orderBy: {
          type: String,
          value: '',
          notify: true
        },

        /**
         * Sort options to choose from with associated icons and titles.
         *
         * @type {Array}
         * @default [{title: 'Frequency', orderBy: '', icon: 'icons:sort'}, {title: 'Alphabetical', orderBy: '_term', icon: 'av:sort-by-alpha'}]
         */
        sortOptions: {
          type: Array,
          value: [{
            title: 'Frequency',
            orderBy: '',
            icon: 'icons:sort'
          },{
            title: 'Alphabetical',
            orderBy: '_term',
            icon: 'av:sort-by-alpha'
          }]
        }
      },

      /**
       * When the user taps a sort option, update the orderBy property.
       *
       * @event tap
       * @private
       */
      _updateSort: function(event) {
        this.orderBy = event.model.option.orderBy;
      },

      /**
       * Use 'selected' icon class when orderBy and option match.
       *
       * @param {String} orderBy
       * @param {Object} an option in sortOptions
       * @return {String} class to use
       * @private
       */
      _getIconClass: function(orderBy, option) {
        return orderBy === option.orderBy ? 'selected' : '';
      }
    });
  </script>
</dom-module>
